{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import { add } from \"./a/test\";\r\nimport { S68k as _S68k, SemanticError as _SemanticError } from \"./pkg/s68k\";\r\n\r\n\r\n\r\ntype CompilationResult = {\r\n    errors: SemanticError[];\r\n} | {\r\n    interpreter: S68k\r\n}\r\n\r\nclass SemanticError {\r\n    error: _SemanticError\r\n    constructor(error: _SemanticError) {\r\n        this.error = error;\r\n    }\r\n    getMessage() {\r\n        return this.error.wasm_get_message()\r\n    }\r\n    getLineIndex() {\r\n        const result = add(1,2)\r\n        console.log(result)\r\n        return this.error.wasm_get_line()\r\n    }\r\n}\r\n\r\n\r\nexport class S68k {\r\n    private _s68k: _S68k;\r\n    constructor(code: string) {\r\n        this._s68k = new _S68k(code);\r\n    }\r\n\r\n    static compile(code: string): CompilationResult {\r\n        const s68k = new S68k(code);\r\n        const errors = s68k.semanticCheck();\r\n        if (errors.length > 0) return { errors }\r\n        return { interpreter: s68k }\r\n    }\r\n    public semanticCheck(): SemanticError[] {\r\n        const errorWrapper = this._s68k.wasm_semantic_check();\r\n        const errors: SemanticError[] = []\r\n        for (let i = 0; i < errorWrapper.get_length(); i++) {\r\n            errors.push(new SemanticError(errorWrapper.get_error_at_index(i)));\r\n        }\r\n        return errors;\r\n    }\r\n\r\n\r\n}"],"names":[],"mappings":";;AAAA,MAA+B,MAAA,GAAA,QAAA,UAAA,CAAA,CAAA;AAC/B,MAA4E,MAAA,GAAA,QAAA,YAAA,CAAA,CAAA;AAU5E,MAAM,aAAa,CAAA;AAAA,EACf,KAAA,CAAA;AAAA,EACA,YAAY,KAAqB,EAAA;AAC7B,IAAA,IAAA,CAAK,KAAQ,GAAA,KAAA,CAAA;AAAA,GACjB;AAAA,EACA,UAAU,GAAA;AACN,IAAO,OAAA,IAAA,CAAK,MAAM;GACtB;AAAA,EACA,YAAY,GAAA;AACR,IAAA,MAAM,MAAS,GAAA,IAAA,MAAA,CAAA,GAAA,EAAI,GAAE,CAAC,CAAA,CAAA;AACtB,IAAA,OAAA,CAAQ,IAAI,MAAM,CAAA,CAAA;AAClB,IAAO,OAAA,IAAA,CAAK,MAAM;GACtB;AACH,CAAA;AAGD,MAAa,IAAI,CAAA;AAAA,EACL,KAAA,CAAA;AAAA,EACR,YAAY,IAAY,EAAA;AACpB,IAAA,IAAA,CAAK,KAAQ,GAAA,IAAI,YAAM,IAAI,CAAA,CAAA;AAAA,GAC/B;AAAA,EAEA,OAAO,QAAQ,IAAY,EAAA;AACvB,IAAM,MAAA,IAAA,GAAO,IAAI,IAAA,CAAK,IAAI,CAAA,CAAA;AAC1B,IAAM,MAAA,MAAA,GAAS,KAAK;AACpB,IAAA,IAAI,OAAO,MAAS,GAAA,CAAA;AAAG,MAAA,OAAO,EAAE,MAAM,EAAA,CAAA;AACtC,IAAO,OAAA,EAAE,aAAa;GAC1B;AAAA,EACO,aAAa,GAAA;AAChB,IAAM,MAAA,YAAA,GAAe,IAAK,CAAA,KAAA,CAAM;AAChC,IAAA,MAAM,SAA0B,EAAA,CAAA;AAChC,IAAA,KAAA,IAAS,IAAI,CAAG,EAAA,CAAA,GAAI,YAAa,CAAA,UAAA,IAAc,CAAK,EAAA,EAAA;AAChD,MAAA,MAAA,CAAO,KAAK,IAAI,aAAA,CAAc,aAAa,kBAAmB,CAAA,CAAC,CAAC,CAAC,CAAA,CAAA;AAAA,KACpE;AACD,IAAO,OAAA,MAAA,CAAA;AAAA,GACX;AAGH,CAAA;AAtBD,OAAA,CAsBC,IAAA,GAAA,IAAA"}